<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>选择与会人员</title>
    <link rel="shortcut icon" type="image/x-icon" href="../plugs/image/favicon.ico"/>
    <link rel="stylesheet" href="../plugs/layui/css/layui.css">
    <script src="../plugs/jquery/jquery-1.11.3.min.js"></script>
    <script src="../plugs/jquery/jquery.cookie.js"></script>
    <script src="../plugs/layui/layui.js"></script>
    <script src="../js/common.js"></script>
    <script type="text/javascript">
        $(function () {
                layui.use(['form'], function () {
                    var form = layui.form;

                    /**
                     * 初始化页面数据
                     */
                    function init() {
                        // console.log(getURLParameter("danwei"));
                        if (getURLParameter("danwei") != null) {
                            $.ajax({
                                type: "POST",
                                url: projectName + "/yjly/findWorkersByDW",
                                contentType: "application/json; charset=utf-8",
                                data: JSON.stringify({
                                    "danwei": getURLParameter("danwei")
                                }),
                                dataType: "json",
                                // async: true,
                                success: function (data) {
                                    if (data.count > 0) {
                                        var html = "";
                                        for (var i = 0; i < data.count; i++) {
                                            if (data.data[i].name.toString().length == 2) {
                                                html += '<input type="checkbox" title="' + data.data[i].name.substring(0, 1) + "&#8195;" + data.data[i].name.substring(1, 2) + '" value="' + data.data[i].name + '" lay-filter="renyuan">'
                                            } else {
                                                html += '<input type="checkbox" title="' + data.data[i].name + '" value="' + data.data[i].name + '" lay-filter="renyuan">'
                                            }
                                        }
                                        $("#center").html(html);
                                        form.render();//页面刷新
                                    } else {
                                        layer.msg('暂无数据');
                                    }
                                },
                                error: function (jqXHR) {
                                    layer.msg('错误：' + jqXHR.status);
                                }
                            });
                        }


                        // var html = "";
                        // for (var i = 0; i < 20; i++) {
                        //     html += '<input type="checkbox" title="韩斌" value="韩斌" lay-filter="renyuan">'
                        // }
                        // $("#center").html(html);
                        // form.render();//页面刷新
                    }

                    init();
                    /**
                     * 选中或撤销选择
                     */
                    form.on('checkbox(renyuan)', function (data) {
                        // if ($("#yhry").val() == "") {
                        //     if (data.elem.checked == true)
                        //         $("#yhry").val(data.value + " ");
                        //
                        // } else {
                        if (data.elem.checked == true) {
                            $("#yhry").val($("#yhry").val() + data.value + " ");
                        } else {
                            $("#yhry").val($("#yhry").val().replace(data.value + " ", ""));
                        }
                        // }
                    });
                });

                /**
                 * 获取URL中参数 key:要获取的的参数名
                 */
                function getURLParameter(key) {
                    var reg = new RegExp("(^|&)" + key + "=([^&]*)(&|$)");
                    var result = window.location.search.substr(1).match(reg);
                    return result ? decodeURIComponent(result[2]) : null;
                }
            }
        )
        ;
    </script>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            font-family: Arial;
            font-size: 14px;
            /*min-height: 500px;*/
            /*min-width: 500px;*/
            width: 100%;
            height: 100%;
            overflow: auto;
            overflow-x: auto;
        }
    </style>
</head>
<body>
<div style="margin: 10px" class=" layui-anim layui-anim-upbit">
    <form class="layui-form" lay-filter="default">
        <div class="layui-form-item">
            <label class="layui-form-label">与会人员</label>
            <div class="layui-input-block">
                <input type="text" id="yhry" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">部门/学院</label>
                <div class=" layui-input-inline">
                    <select name="hyjb" lay-verify="required" lay-search>
                        <option value=""></option>
                        <option value="船舶与海洋工程学院">船舶与海洋工程学院</option>
                        <option value="机械工程学院">机械工程学院</option>
                        <option value="能源与动力学院">能源与动力学院</option>
                        <option value="电子信息学院">电子信息学院</option>
                        <option value="计算机学院">计算机学院</option>
                    </select>
                </div>
                <input type="button" id="xzhydd" class="layui-btn " title="选择会议地点" value="搜索">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">复选框</label>
            <div id="center" class="layui-input-block">
                <!--<input type="checkbox" name="like[write]" title="韩斌" value="韩斌" lay-filter="renyuan">-->
                <!--<input type="checkbox" name="like[read]" title="高尚" value="高尚" lay-filter="renyuan">-->
                <!--<input type="checkbox" name="like[read]" title="吴健康" value="吴健康" lay-filter="renyuan">-->
                <!--<input type="checkbox" name="like[read]" title="李秀明" value="李秀明" lay-filter="renyuan">-->
                <!--<input type="checkbox" name="like[read]" title="周扬" value="周扬" lay-filter="renyuan">-->
                <!--<input type="checkbox" name="like[read]" title="温大勇" value="温大勇" lay-filter="renyuan">-->
            </div>
        </div>
    </form>
</div>
</body>
</html>